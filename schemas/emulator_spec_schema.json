{
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "type": "object",
  "title": "Root Schema",
  "required": [
    "cores"
  ],
  "properties": {
    "cores": {
      "type": "array",
      "title": "Array of core objects describing one or more cores in a multicore cluster",
      "items": {
        "type": "object",
        "title": "Object describing a core to emulate",
        "required": [
          "id",
          "order",
          "program",
          "channels",
          "options"
        ],
        "properties": {
          "id": {
            "type": "string",
            "title": "Identification string of the core"
          },
          "input_file": {
            "type": "string",
            "title": "path of the data input file"
          },
          "order": {
            "type": "integer",
            "title": "Field indicating the order in which cores must be run in a multicore emulation session"
          },
          "inputs": {
            "type": "array",
            "default": [],
            "title": "Array of objects that specify the external inputs to the core",
            "items": {
              "type": "object",
              "title": "Object describing a single external input",
              "required": [
                "reg_n",
                "channel",
                "type",
                "name"
              ],
              "properties": {
                "channel": {
                  "type": "integer",
                  "title": "Channel to push the input to"
                },
                "reg_n": {
                  "type": "integer",
                  "title": "IO address (or register address if remapping is not active) to push the input to"
                },
                "type": {
                  "type": "string",
                  "title": "Type for the input"
                },
                "name": {
                  "type": "string",
                  "title": "Name of this input (tied to the CSV column title)"
                }
              }
            }
          },
          "outputs": {
            "type": "array",
            "default": [],
            "title": "Array of objects that specify the emulation outputs from the core",
            "items": {
              "type": "object",
              "title": "Object describing a single emulation output",
              "required": [
                "reg_n",
                "type",
                "name"
              ],
              "properties": {
                "reg_n": {
                  "type": "integer",
                  "title": "array containing the register addres and channel nubert of the target"
                },
                "type": {
                  "type": "string",
                  "title": "type to use for the output"
                },
                "name": {
                  "type": "string",
                  "title": "Name to give to this output"
                }
              }
            }
          },
          "program": {
            "type": "object",
            "title": "Description of the program to run on this core",
            "required": [
              "type",
              "file"
            ],
            "properties": {
              "type": {
                "type": "string",
                "title": "type of the program code file"
              },
              "file": {
                "type": "string",
                "title": "path of the program input file"
              }
            }
          },
          "memory_init": {
            "type": "array",
            "default": [],
            "title": "Array of objects that specify the initial values for state variables",
            "items": {
              "type": "object",
              "title": "Object describing the initial value for a single state variable",
              "required": [
                "reg_n",
                "value",
                "type",
                "name"
              ],
              "properties": {
                "value": {
                  "type": "number",
                  "title": "Value to use for initialization of the state variable"
                },
                "reg_n": {
                  "type": "integer",
                  "title": "IO address (or register address if remapping is not active) of the state variable to initialize"
                },
                "type": {
                  "type": "string",
                  "title": "Type of the value to use for initialization"
                },
                "name": {
                  "type": "string",
                  "title": "Name of the state variable (For documentation purposes only, not used internally)"
                }
              }
            }
          },
          "channels": {
            "type": "integer",
            "title": "number of channels active on this core"
          },
          "options": {
            "type": "object",
            "default": {},
            "title": "Core behaviour configuration options",
            "required": [
              "comparators"
            ],
            "properties": {
              "comparators": {
                "type": "string",
                "title": "Type of comparator implementation implemented for this core"
              },
              "efi_implementation": {
                "type": "string",
                "title": "EFI implementation selector"
              }
            }
          }
        }
      }
    },
    "interconnect": {
      "type": "array",
      "title": "Array of object describing how the cores should be connected",
      "items": {
        "type": "object",
        "title": "Object describing the connection between two cores",
        "required": [
          "source",
          "destination",
          "registers"
        ],
        "properties": {
          "source": {
            "type": "string",
            "title": "source core id"
          },
          "destination": {
            "type": "string",
            "title": "Destination core id"
          },
          "registers": {
            "type": "array",
            "title": "The registers Schema",
            "items": {
              "type": "object",
              "title": "A Schema",
              "required": [
                "name",
                "source",
                "destination"
              ],
              "properties": {
                "name": {
                  "type": "string",
                  "title": "Name of the connection"
                },
                "source": {
                  "type": "array",
                  "default": [],
                  "title": "array that specifies the channel and address of the source register",
                  "items": {
                    "type": "integer"
                  }
                },
                "destination": {
                  "type": "array",
                  "title": "array that specifies the channel and address of the target register",
                  "items": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}